# ============================================================================
# VeloPay API Configuration Template
# ============================================================================
# Copy this file to .env and update with your actual values
# NEVER commit .env file to version control!
#
# Quick setup:
#   cp .env.example .env
#   # Edit .env with your values
#   # Generate secure secrets with: openssl rand -base64 48
# ============================================================================

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
# PostgreSQL connection string
# Format: postgresql://username:password@host:port/database?options
#
# Development example:
DATABASE_URL=postgresql://velopay_user:password@localhost:5432/velopay
#
# Production example (with SSL):
# DATABASE_URL=postgresql://velopay_user:password@db.example.com:5432/velopay?sslmode=require
#
# Notes:
# - Use strong passwords for database users
# - Enable SSL in production (sslmode=require)
# - Ensure database exists before running migrations
# - Run migrations with: sqlx migrate run
# ============================================================================

# ============================================================================
# BLOCKCHAIN CONFIGURATION
# ============================================================================
# WebSocket RPC URL for Substrate blockchain node
#
# Local development:
CHAIN_RPC_URL=ws://127.0.0.1:9944
#
# Remote node:
# CHAIN_RPC_URL=wss://blockchain.velopay.com
#
# Notes:
# - ws:// for unencrypted local connections
# - wss:// for encrypted remote connections
# - Ensure blockchain node is running and accessible
# - Default Substrate RPC port is 9944
# ============================================================================

# ============================================================================
# SERVER CONFIGURATION
# ============================================================================
# Host and port for the API server
#
# Development (localhost only):
SERVER_HOST=127.0.0.1
SERVER_PORT=8080
#
# Production (all interfaces):
# SERVER_HOST=0.0.0.0
# SERVER_PORT=8080
#
# Notes:
# - Use 127.0.0.1 for local development
# - Use 0.0.0.0 to bind to all interfaces in production
# - Ensure port is not already in use
# - Behind reverse proxy: Use internal port, configure proxy separately
# ============================================================================

# ============================================================================
# SECURITY CONFIGURATION
# ============================================================================

# ----------------------------------------------------------------------------
# JWT (JSON Web Token) Configuration
# ----------------------------------------------------------------------------
# Secret key for signing JWT tokens
# CRITICAL: Must be at least 32 characters in production
#
# Generate secure secret:
#   openssl rand -base64 48
#
# ⚠️  SECURITY WARNING:
# - NEVER use default value in production
# - Use cryptographically secure random generator
# - Rotate periodically (requires user re-authentication)
# - Keep secret, NEVER commit to version control
JWT_SECRET=REPLACE-WITH-SECURE-RANDOM-VALUE-MIN-32-CHARS-USE-OPENSSL-RAND
#
# Token expiration time in seconds
# Default: 86400 (24 hours)
# Common values:
#   3600   = 1 hour
#   86400  = 24 hours (recommended)
#   604800 = 7 days
JWT_EXPIRATION=86400
# ----------------------------------------------------------------------------

# ----------------------------------------------------------------------------
# Admin API Key Configuration
# ----------------------------------------------------------------------------
# API key for administrative endpoints
# CRITICAL: Must be at least 32 characters in production
#
# Generate secure key:
#   openssl rand -base64 48
#
# ⚠️  SECURITY WARNING:
# - NEVER use default value in production
# - Use cryptographically secure random generator
# - Rotate monthly in production
# - Store securely, NEVER commit to version control
# - Different from JWT_SECRET
ADMIN_API_KEY=REPLACE-WITH-SECURE-RANDOM-VALUE-MIN-32-CHARS-DIFFERENT-FROM-JWT
# ----------------------------------------------------------------------------

# ----------------------------------------------------------------------------
# Blockchain Admin Seed Configuration
# ----------------------------------------------------------------------------
# Seed phrase for blockchain transaction signing
# Used for mint/burn approvals and admin operations
#
# Development (use test accounts):
ADMIN_SEED=//Alice
#   Other test accounts: //Bob, //Charlie, //Dave, //Eve, //Ferdie
#
# Production (use secure mnemonic):
# ADMIN_SEED=word1 word2 word3 ... word24
#
# Generate production seed:
#   subkey generate --scheme Sr25519
#
# ⚠️  CRITICAL SECURITY WARNING:
# - NEVER use test seeds (//Alice, etc.) in production
# - Use 24-word BIP39 mnemonic for production
# - Store backup securely (hardware wallet, paper backup)
# - NEVER commit to version control
# - Loss of seed = loss of admin control
# - Compromise of seed = system compromise
# ----------------------------------------------------------------------------

# ============================================================================
# RATE LIMITING CONFIGURATION
# ============================================================================
# Protection against brute force and DoS attacks
#
# Maximum requests per window for general endpoints
RATE_LIMIT_REQUESTS=100
#
# Time window in seconds
RATE_LIMIT_WINDOW_SECONDS=60
#
# Note: Auth endpoints have stricter limits (5 req/min) configured in code
#
# Recommended values:
# Development:
#   RATE_LIMIT_REQUESTS=1000
#   RATE_LIMIT_WINDOW_SECONDS=60
#
# Production:
#   RATE_LIMIT_REQUESTS=100
#   RATE_LIMIT_WINDOW_SECONDS=60
#
# High-traffic production:
#   RATE_LIMIT_REQUESTS=500
#   RATE_LIMIT_WINDOW_SECONDS=60
# ============================================================================

# ============================================================================
# CORS CONFIGURATION
# ============================================================================
# Cross-Origin Resource Sharing allowed origins
# Comma-separated list of allowed frontend URLs
#
# Development (multiple local frontends):
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173
#
# Production (specific domains only):
# CORS_ALLOWED_ORIGINS=https://app.velopay.com,https://admin.velopay.com
#
# ⚠️  SECURITY WARNING:
# - NEVER use wildcard (*) in production
# - Only list trusted frontend domains
# - Use HTTPS in production
# - Each origin must start with http:// or https://
# - Validated at startup, invalid config will fail
#
# Examples:
#   Single origin:    CORS_ALLOWED_ORIGINS=https://app.velopay.com
#   Multiple origins: CORS_ALLOWED_ORIGINS=https://app.velopay.com,https://admin.velopay.com
#   Development:      CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173
# ============================================================================

# ============================================================================
# OPTIONAL CONFIGURATION
# ============================================================================
# These settings have sensible defaults but can be customized

# Logging level
# Options: error, warn, info, debug, trace
# Default: info
# RUST_LOG=info

# Database connection pool size
# Configured in code (50 max, 5 min connections)
# Override if needed for specific deployment

# Blockchain operation timeout
# Configured in code (30 seconds)
# Override if needed for slow networks

# ============================================================================
# DEPLOYMENT CHECKLIST
# ============================================================================
# Before deploying to production:
#
# [ ] All REPLACE-WITH placeholders updated with secure values
# [ ] JWT_SECRET is 48+ characters from openssl rand -base64 48
# [ ] ADMIN_API_KEY is 48+ characters from openssl rand -base64 48
# [ ] ADMIN_SEED is secure 24-word mnemonic (NOT //Alice)
# [ ] DATABASE_URL uses strong password and SSL (sslmode=require)
# [ ] CHAIN_RPC_URL uses wss:// for production
# [ ] SERVER_HOST set to 0.0.0.0 for production
# [ ] CORS_ALLOWED_ORIGINS set to production domains (HTTPS)
# [ ] CORS_ALLOWED_ORIGINS does NOT contain wildcard (*)
# [ ] Rate limits appropriate for expected traffic
# [ ] .env file has proper permissions (600)
# [ ] .env file is NOT committed to version control
# [ ] Secrets are stored in secure secret management system
# [ ] Backup of ADMIN_SEED stored securely
#
# ============================================================================
# GETTING HELP
# ============================================================================
# Documentation:
#   - README.md           - Quick start guide
#   - ARCHITECTURE.md     - System architecture
#   - SECURITY.md         - Security best practices
#   - DEPLOYMENT.md       - Production deployment
#   - CONTRIBUTING.md     - Development guide
#
# Support:
#   - GitHub Issues: https://github.com/ChronoCoders/velopay/issues
#   - Email: team@velopay.com
# ============================================================================
